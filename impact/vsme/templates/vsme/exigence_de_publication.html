{% extends "base.html" %}

{% block title %}{{ titre }}{% endblock %}

{% block content %}
    <div class="fr-container fr-my-4w">
        <div class="fr-grid-row">
            {% include "snippets/tableau_de_bord_menu.html" %}

            <div class="fr-col">
                <h3>B1 - Base d'établissement</h3>

                <p>Exercice {{ rapport_vsme.annee }}</p>
                <table>
                    <tr>
                        <th>Indicateur</th>
                        <th>Statut</th>
                        <th></th>
                    </tr>

                    {% for indicateur in indicateurs %}
                        <tr>
                            <td>{{ indicateur.title }}</td>
                            <td>
                                {% if indicateur.est_complete %}
                                    <p class="fr-badge fr-badge--success fr-badge--no-icon">COMPLÉTÉ</p>
                                {% else %}
                                    <p class="fr-badge">À COMPLÉTER</p>
                                {% endif %}
                            </td>
                            <td>
                                <button aria-controls="htmx-modal-indicateur" data-fr-opened="false" type="button" class="fr-btn fr-icon-edit-line fr-btn--secondary"
                                        title="Modifier"
                                        hx-get="{% url 'vsme:indicateur_vsme' rapport_vsme.id indicateur.id %}"
                                        hx-target="#htmx-modal-indicateur">
                                    Modifier
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                </table>

                <dialog id="htmx-modal-indicateur" class="fr-modal fr-modal--top" aria-labelledby="htmx-modal-indicateur-title" data-fr-concealing-backdrop="true"></dialog>

            </div>
        </div>
    </div>
{% endblock %}
